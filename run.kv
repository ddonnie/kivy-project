<Controller>:
    markup: True
    popup: increment.__self__
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'Sailfish.png'
    ScreenManager:
        id: _screen_manager

##################################Interval Screen#################################################
        Screen:
            id: bl
            name: 'IntervalScreen'
            FloatLayout: #Buttons To Remove and To Add Interval
                size_hint: 1,.15
                pos_hint: {'center_x':.5,'y': .85}
        #        canvas.before:
        #            Color:
        #                rgb: 1,0,0,1
        #            Rectangle:
        #                pos: self.pos
        #                size: self.size
                IconButton:
                    on_release: root.remove_interval()
                    pos_hint: {'center_y':.5,'center_x': .2}
                    IconImage:
                        source: 'data/icons/ic_alarm_off_white_48dp.png'

                IconButton:
                    on_release: increment.open()
                    pos_hint: {'center_y':.5,'center_x': .8}
                    IconImage:
                        source: 'data/icons/ic_alarm_add_white_48dp.png'
                        size: 48, 48


            ScrollView: #Interval Container
                pos_hint: {'center_x': .5,'center_y':.5}
                size_hint: 1, .7
                do_scroll_x: False
        #        canvas.before:
        #            Color:
        #                rgb: 0,1,0,1
        #            Rectangle:
        #                pos: self.pos
        #                size: self.size
                GridLayout:
                    id: intervalContainer
                    cols: 1
                    padding: 48
                    spacing: 48
                    height: self.minimum_height
                    size_hint: 1, None
                    do_scroll_x: False


            Popup:
                id: increment
                separator_color: 0, 0, 0, 0
                title: 'Set Interval Time'
                title_align: 'center'
                title_size: 24
                on_parent: if self.parent == bl: bl.remove_widget(self)
                content: popupcontent

                FloatLayout:
                    id: popupcontent
                    Carousel:
                        id:intervalCarouselMinutes
                        loop: True
                        direction: 'bottom'
                        anim_move_duration: 0.1
                        pos_hint: {'center_x': .5, 'center_y': .5}

                    IconButton:
                        on_release: root.set_interval()
                        pos_hint: {'center_y':.05,'center_x': .8}
                        IconImage:
                            source: 'data/icons/ic_check_white_48dp.png'

                    IconButton:
                        on_release: increment.dismiss()
                        pos_hint: {'center_y':.05,'center_x': .2}
                        IconImage:
                            source: 'data/icons/ic_cancel_white_48dp.png'

##################################Cycle Screen####################################################
        Screen:
            name: 'CycleScreen'
            FloatLayout:
                Label:
                    text: 'Set Cycle Number'
                    font_size: 32
                    pos_hint: {'center_x': .5, 'center_y': .8}
                Carousel:
                    id:intervalCarouselCycles
                    loop: True
                    direction: 'right'
                    anim_move_duration: 0.1
                    pos_hint: {'center_x': .5, 'center_y': .5}
                Label:
                    text: 'x'
                    font_size: 72
                    pos_hint: {'center_x': .25, 'center_y': .5}

##################################Run Screen####################################################
        Screen:
            name: 'RunScreen'
            FloatLayout:
                IconButton:
                    pos_hint: {'center_x': .5, 'center_y': .9}
                    size_hint: .5,.5
                    size: 72,72
                    on_press: root.start_stop()
                    IconImage:
                        id: play_pause
                        size_hint:None,None
                        allow_stretch: True
                        size: 72,72
                        source: 'data/icons/ic_play_circle_outline_white_48dp.png'
                Label:
                    id: stopwatch
                    markup: True
                    font_size: 72
                    pos_hint: {'center_x': .5, 'center_y': .7}
                    text: '00:00.00'
                Label:
                    id: allwatch
                    markup: True
                    font_size: 36
                    pos_hint: {'center_x': .5, 'center_y': .4}
                    text: '00:00.00'
##################################Navigation Panel####################################################

    BoxLayout:
        orientation: 'horizontal'
        size_hint: 1,.15
        IconButtonPanel:
            on_release: _screen_manager.current = 'IntervalScreen'
            IconImage:
                source: 'data/icons/ic_access_alarm_white_48dp.png'
        IconButtonPanel:
            on_release: _screen_manager.current = 'CycleScreen'
            IconImage:
                source: 'data/icons/ic_loop_white_48dp.png'
        IconButtonPanel:
            on_release: root.run_summary()
            IconImage:
                source: 'data/icons/ic_directions_run_white_48dp.png'
        IconButtonPanel:
            on_release: _screen_manager.current = 'MapScreen'
            IconImage:
                source: 'data/icons/ic_explore_white_48dp.png'

<IconButton@Button>:
    size_hint: None,None
    size: 48,48
    background_color: 0, 0, 0, 0

<IconButtonPanel@IconButton>:
    size_hint: 1,.25
    pos_hint: {'center_y': .5}

<IconImage@Image>:
    size: 48, 48
    center_x: self.parent.center_x
    center_y: self.parent.center_y












